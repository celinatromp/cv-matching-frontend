<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="bedrijf_vacature.css" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav class="navbar navbar-light bg-light">
      <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">LOGO</span>
        <div class="d-flex justify-content-end align-items-center">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
          <span style="margin: 0 10px">&nbsp;</span>
          <a class="nav-link" href="#">Chats</a>
          <span style="margin: 0 10px">&nbsp;</span>
          <button
            type="button"
            class="btn btn-close"
            disabled
            aria-label="Close"
          ></button>
        </div>
      </div>
    </nav>
    <br />
    <button onclick="fetchVacaturesForCompany(1)">Bedrijf1</button>
    <button onclick="fetchVacaturesForCompany(2)">Bedrijf2</button>
    <button onclick="callBedrijf()">call</button>
    <button onclick="haalLocalStorageOp()">callLocal</button>
    <br />
    <br />

    <div class="bedrijfvacature-top">
      <p>Vacature</p>
      <p>Aanmaken</p>
    </div>

    <div class="container">
      <div class="row" id="vacatureContainer"></div>
    </div>

    <br />

    <hr />

    <script>
      function callBedrijf() {
        fetch("http://localhost:8080/felixVoorbeeld")
          .then((r) => r.json())
          .then((d) => {
            console.log(d);
            localStorage.setItem("mijngeheim", d.id);
          });
      }
      function haalLocalStorageOp() {
        let mijnBedrijfCode = localStorage.getItem("mijngeheim");
        alert(mijnBedrijfCode);
        fetchVacaturesForCompany(mijnBedrijfCode);
      }
      function fetchVacaturesForCompany(bID) {
        document.getElementById("vacatureContainer").innerHTML = "";
        fetch("http://localhost:8080/bedrijf/vacature/" + bID)
          .then((response) => response.json())
          .then((vacatures) =>
            vacatures.forEach((vacature) => {
              console.log(vacature);
              putData(vacature);
            })
          );
      }

      function putData(vacature) {
        console.log(vacature.titel);
        let card = document.createElement("div");
        card.classList.add("card");
        card.style.width = "18rem";
        card.style.marginBottom = "20px";
        card.style.marginLeft = "20px";

        let image = document.createElement("img");
        image.src =
          "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw8PDw8PDw8VFRUPDw8PDw8VDw8PDw8PFREWFhUVFRUYHSggGBolHRUVITEhJSkrLi4uFx8zODMtNygtLisBCgoKBQUFDgUFDisZExkrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIALcBEwMBIgACEQEDEQH/xAAYAAEBAQEBAAAAAAAAAAAAAAAAAQIDB//EABgQAQEBAQEAAAAAAAAAAAAAAAARAYEh/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/APYwgACgikAAAQUwADQRQBFABFAQUBBQBAAAAgqAAAIAAAFDgDQIC0AAAAUBFAEFAQVABQEFAQFBAAAAAAAARRIAGgIKgAANUAAFAAAAAAAAAAAAAABFAEUQAAAABFAQVAAAQDQFQBoKoAAAAAABQAIAAAAAAACAAAAFAATQVFQAABAABAFIA0qKAAAAAAAKgAAAAAAAICoAAAAIAFAAQFBADRAVAAABvFAAAAAAAAAAAAEAAAAAABFQAEoCiAAAAACKgCaAKIA6AApEUAAAMAAQAAAAAEAVAARQBAFQAAAAQFQAAAQACiAOogCgAohAAUEAAAAEAAAEVAVAAKFBFKgKIAAAIoAgAIpoM+igOpUAUACgAUKAiiAKiAoIAAAVFAoACKgKIAAAAmgCoAACboAAgDrQAAAAABAFBAAAAAEFBAUEAAAACgCKARBaCAAAgAAFABspQFQAVAAAABKCoACoAQAA0AAAAQFKkAFQAAADQCmiQAoaCCgNoACgAABEAAAAAAACgAigAgAoAAAAAIaAFAAQACoAVAB//9k=";

        image.classList.add("card-img-top");
        image.alt = "Vacature Image";
        card.appendChild(image);

        let cardBodyDiv = document.createElement("div");
        cardBodyDiv.classList.add("card-body");
        card.appendChild(cardBodyDiv);

        let cardTitle = document.createElement("h5");
        cardTitle.classList.add("card-title");
        cardTitle.innerHTML = vacature.titel;
        cardBodyDiv.appendChild(cardTitle);

        let cardText = document.createElement("p");
        cardText.classList.add("card-text");
        cardText.textContent = vacature.omschrijving;
        cardBodyDiv.appendChild(cardText);

        let statusDiv = document.createElement("div");
        statusDiv.classList.add("card-body");
        card.appendChild(statusDiv);

        let status = document.createElement("h6");
        status.innerHTML = vacature.deStatusVacature;
        statusDiv.appendChild(status);

        document.getElementById("vacatureContainer").appendChild(card);
      }
    </script>
  </body>
</html>
